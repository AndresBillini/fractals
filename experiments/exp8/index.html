<!doctype html>
<head>
  <meta charset="utf-8">

  <title>Experiment 8</title>
  <link rel="icon" type="image/png" href="../../favicon/favicon.png">
  <link rel="stylesheet" type="text/css" id="style-css" href="exp.css">
  <script src="exp.js" type="text/javascript"></script>
  <link href="https://fonts.googleapis.com/css?family=Play" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/TweenMax.min.js"></script>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/gsap/latest/plugins/ScrollToPlugin.min.js"></script>
</head>
<body onscroll="parallax(event)" onmousemove="amaze(event)">
   
   <div id="canvas">
       
   </div>
   
   <div id="fractals">FRACTALS<br>STUDIO</div>
   
   <script>
       hexFill();
   </script>
   
   <script>    
       $(function(){	

        var $window = $(window);
        var scrollTime = 1;
        var scrollDistance = 120;

            $window.on("mousewheel DOMMouseScroll", function(event){

                event.preventDefault();	

                var delta = event.originalEvent.wheelDelta/80 || -event.originalEvent.detail/3;
                var scrollTop = $window.scrollTop();
                var finalScroll = scrollTop - parseInt(delta*scrollDistance);

                TweenMax.to($window, scrollTime, {
                    scrollTo : { y: finalScroll, autoKill:true },
                        ease: Power1.easeOut,
                        overwrite: 5							
                });

            });
        });
       
        function recursive(x){
            var f=document.getElementById('fractals');
            var c=document.getElementById('canvas');
            var cC=c.childNodes;
            var cCL=cC.length;
            var y2=window.scrollY;
            var vY=window.innerHeight;
            var yProc=(y2/vY)/3;
            
            if(x<42){
                x+=1;
                setTimeout(function(){ cC[x].style.opacity=yProc+0.01; },1500/x);
            recursive(x);    
                console.log("hue");
            }
            else{
                console.log("done");
            }
            
        }
       
           setTimeout(function(){ 
               var f=document.getElementById('fractals');
               var c=document.getElementById('canvas');
               var cC=c.childNodes;
               var cCL=cC.length;
               var y2=window.scrollY;
               var vY=window.innerHeight;
               var yProc=(y2/vY)/3;
               
               f.style.opacity=1;
               
               recursive(1);
               /*
               for(i=1;i<cCL;i++){
                   cC[i].style.opacity=yProc+0.01;
               }*/
               
               
           }, 1000);
   </script>
   
</body>
</html>
